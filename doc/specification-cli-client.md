% Specification for Sheepshead Command Line Interface
% Michael McDermott

The long term goal is to build a nice web-based interface for the game of
sheepshead. I will build a command line interface (CLI) first in order to better
test the server.

The exercise is a useful one because we cannot be certain which features ought
to go into the server and which ones ought not to if we do not have some client
in mind.

The presentation for the web based version will, naturally, be different, but I
do believe that a fully-playable console version will smoke out most possible
bugs. Moreover, a CLI client will allow for ready AI experimentation because the
CLI could be scripted with something like `expect (1)` during the prototyping
stage.

## Startup ##

The binary for this interface ought to be called `sheepshead`. Nothing fancy,
just a name that will make it quite straightforward what the application is. We
can add suffixes for other items in the suite later as they will likely only be
invoked by more advanced users.

Starting up the command `sheepshead` should display a simple banner with the
name and version of the software and an indication how to access online help.

## Commands ##

The CLI will be shell-like, allowing the user to provide commands at the prompt
in order to interact with the server. The commands are in the list below. We
will expand on the individual commands in the following subsections.

* `help`
* `connect`
* `nick`
* `list`
* `info`
* `start`
* `join`
* `take`
* `pass`
* `play`
* `bury`
* `hand`
* `buried`

### `help` ###

The `help` command mmay be one of the most fundamental. It ought to print its
own usage `help [command]` when invoked without arguments and a detailed help
message for the command passed as an argument when it is invoked with arguments.

The messages can be lifted from this document where appropriate.

### `connect` ###

The basic format of the `connect` command is

    connect <user>@<server>

Where `user` is the nickname to be used upon connection. If the nihckname is not
available, the server may respond with a modified nickname that the client may
choose to modify again via the `nick` command.

Security challenges, like passwords or certificates, are not going to be
considered as part of this version.

### `nick` ###

Since nicknames will need to be unique, it will be possible for the a given
nickname to be unavailable when requested by the client. In this case, the
server will specify a new, unique nickname. If the user wishes to change the
nickname from the autogenerated new value with the syntax

    nick <new name>

The server may respond with yet another new nickname of the new one is also
unavailable.

### `list` ###

A server may be running any number of games simultaneously. When a new
connection is established, a client may view the games available to the client
with this command

    list

The values may be inspected with the `info` command.

### `info` ###

This command has two forms.

    info game <game ID>

This form views basic information about a given game (by unique ID, as specified
by the server). The main purpose is to allow a user to determine if a given game
is one he wishes to join.

The second form is used to display information about a user's profile, like so:

    info user <user nickname>

### `start` ###

The `start` command allows a user to create a new game to be run on the server.
The only option at present is to specify the name of the game for identification
by other players.

    start <game name>

The server may respond with an alternate game name, if the current one is
already taken. In either event, the server will respond with a game ID.

### `join` ###

The `join` command allows a user to attempt to join a game that has been created
and has an available seat. The command takes the form

    join <game ID>

The server will respond with whether or not the joining was successful.

### `take` ###

The `take` command is only valid during the initial phase of the game. There is
no qualifier. 

    take

The command can be entered in advance of the user's turn to pick and the
decision taken into account at the last moment.

### `pass` ###

This is the sister command to `take`. It instructs the game engine to pass when
it becomes the current player's turn to choose.

### `bury` ###

If a player has taken the blind that player must bury a number of cards matching
the number received in the blind. The `bury` command accomplishes this. It may
only be invoked after the player has taken the blind and then only once.

The cards may be buried by 1-based index or by a shorthand of their names

    bury 1 2 3

and

    bury AC 6D KS

the latter form indicating that the Ace of Spades, 6 of Diamonds and King of
Spades should be buried.

### `play` ###

Play uses the same format for card representation as `bury`, but may only be
used with a single entry. This can be done in advance of a player's turn to
play and the card changed before the player's turn comes by entering the command
again.

The command should take the form

    play 1

or

    play KS

### `hand` ###

The `hand` command re-prints the player's hand under the prompt. It is invoked
without argument and returns two lines of output.

    KS     AD    7C
    1      2     3

### `buried` ###

This command is invoked without argumetns and uses the same output format as
`hand`, the only difference being that it shows a player what cards they buried
at the outset of the match.

## Conclusion ##

This is version VERSION_NUMBER of this specification. It is non-final and
probably incomplete. 
